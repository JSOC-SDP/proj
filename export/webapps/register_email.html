<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta HTTP-EQUIV="Content-Type" content="text/html; charset=iso-8859-1">
<title>JSOC E-Mail Registry</title>

<script type="text/javascript" src="js/prototype-1.6.1.js"></script>
<script type="text/javascript" src="js/cookies.js"></script>
<script type="text/javascript" src="js/prototip.js"></script>
<link rel="stylesheet" type="text/css" href="css/prototip.css" >

<style type="text/css">

#body { margin:0; padding:0; }
#header { position:relative; top:0; left:0; width:100%; background:#eee; }
#footer { position:fixed; bottom:0; left:0; width:100%; background:#eee; }
span.tip { background-color:blue;font-family:verdana;color:white;font-size:1em;font-weight:bold;}
.prototip { font:0.8em Arial, Helvetica, sans-serif; }
</style>

<!-- Add export email checking code. -->
<script type="text/javascript" src="exportdata.d/export_email_verify.js"></script>

<script type="text/javascript">

var Host = location.host;
var ExportUserOK;
var ExportNotifyOK;
var TipsCreated = 0;

var colorDarkGreen = "#009000";
var colorDarkRed = "#C00000";
var colorDarkBlue = "#0000B0";

function initVars()
  {
  Host = location.host;
  if (Host == "jsoc2.stanford.edu")
    Internal = 1;
  else
    Internal = 0;
  $("ExportRequestor").value = "";
  email_initVars();

  }

function getargs()
  {
  email_getargs();
  }

function OnLoadInit()
  {
  initVars();
  Cookie.init({name:"exportdata", expires:14});
  getargs();
  CreateTips();
  window.focus();
  }

function MainTips(tipstyle)
  {
  if (TipsCreated == 0)
    {
    new Tip('RequestorHelp','Optional place for your name, this will be used later when we have a way of saving your ' +
        'preferred export options.  This value will be saved in a Cookie if allowed.',tipstyle);
    new Tip('NotifyHelp','Email address to be used to notify you when the export is complete and ready to be ' +
        'fetched using the RequestID. NOTE - an email address is required for exports from jsoc2.',tipstyle);
    new Tip('SubmitHelp','This button starts the email registration and check operation.  After a submit request the button ' +
        'is greyed out waiting for a response, usually a few seconds after a submit request.  ' +
        'This page will check each few seconds to see if the email address has been validated by a Reply from you, either ' +
        'in an earlier session or after you press Submit if doing this process for the first time. ' +
        'After a few minutes this page will giveup and report an error.', tipstyle);
    }
  };

function CreateTips()
  {
  var tipstyle =
    {
    style:'protoblue',
    hook:{target:'topRight',tip:'bottomLeft'},
    stem:'bottomLeft',
    closeButton:false,
    hideAfter:5,
    hideOn:'click',
    showOn:'click',
    border:3,
    radius:3,
    width:300,
    };

  MainTips(tipstyle);
  TipsCreated = 1;
  $$("span.tip").each(function(showspan){showspan.show();});
  }
</script>

</head>
<body bgcolor="#E0F0FF" onload="OnLoadInit();" >
<div id="header">
  <a href ="http://jsoc.stanford.edu" id="header_logo"><img src="http://hmi.stanford.edu/images/web/JSOC_120.gif"
    style="vertical-align:middle;height:60px;border:0" alt="JSOC logo"></a>
&nbsp;&nbsp;&nbsp;
<b><big style="vertical-align:middle">&nbsp;&nbsp;JSOC Export E-Mail Registry</big></b>
<hr>
</div> <!-- end div header -->
<div id="Validate_email">
<br><b>JSOC Data Export Email Registry</b>
<p>
The JSOC data-export system requires an email address to be validated as a prerequisite to system usage -
use this page to do so. Alternatively, registration can be completed via the
main export page. Please enter this email address in the "Notify" field. Notices regarding export success
or failure will be sent to this address.
<p>
The "Requestor" field is optional, but if you provide your name then we can use it in
communications should we need to contact you or provide assistance with issues.
<p>
After entering the requested information into the two fields, click the "Check Email Registration" button.
If your address is already registered with the JSOC, this page will update with confirmation. No email
message will be sent.
<p>
If your address is not registered, then you will recieve an email message
asking you to click "reply" (do not modify the message). When we recieve the reply, we will
respond notifying your address has been registered.
<p>
If we do not recieve a reply within fifteen minutes, we will abort the registration process. Feel
free to try again if the timeout interval has exceeded. Contact us if you experience troubles.
<p>
If you have enabled cookies in your browser we will save the "Notify" and "Requestor" values and
use them with future export requests; the cookie times out in ten days.
<p>
<p>
<table>
    <tr id="NotifyRow">
      <td>Notify</td>
      <td><span id="NotifyHelp" class="tip">?</span></td>
      <td>
        <input id="ExportNotify" type="text" name="notify" value="" style="width:18em;" onChange="SetExportUser();" >
        <span id="ExportNotifyMsg">&nbsp;</span>
      </td>
      <td>
        Provide your email address for notification.
      </td>
    </tr>

    <tr id="RequestorRow">
      <td>Requestor</td>
      <td><span id="RequestorHelp" class="tip">?</span></td>
      <td><input id="ExportRequestor" type="text" name="requestor" value="" onChange="SetExportUser();" ></td>
      <td><span id="RequestorMessage">Provide an optional export-user identifier.</span></td>
    </tr>

    <tr id="AjaxExportRequestRow">
      <td colspan="4">
        <span id="SubmitHelp" class="tip">?</span>&nbsp;
        <input id="ExportButton" type="button" value="Check Email Registration"
             style="background-color:#D8D8D8" onClick="startEmailCheck(null);" >
        <span id="ExportButtonMsg">Please only click once for for email check.</span >
      </td>
    </tr>

    <tr">
      <td colspan="2">Status:&nbsp;&nbsp;</td>
      <td colspan="2">
        <span id="ExportCheckMsg">&nbsp;</span >
      </td>
    </tr>
</table>

<p>
<p>

<HR>
<P style="height:1px">
<div id="footer" style="vertical-align:bottom;text-align:center;">
<I>Home page for:</I>
<a href = "http://jsoc.stanford.edu/" id="footer_link"><b>SDO-JSOC</b></a>
</div>

</body>
</html>
